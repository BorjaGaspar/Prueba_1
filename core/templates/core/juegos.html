{% extends 'core/base_private.html' %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-dark" id="titulo-seccion">Sala de Terapia</h2>
    
    <button id="btn-volver" class="btn btn-outline-secondary d-none" onclick="irAtras()">
        <i class="bi bi-arrow-left me-2"></i> Volver
    </button>
</div>

<div id="pantalla-inicio" class="row animate__animated animate__fadeIn">
    
    <div class="col-md-6 mb-4">
        <div class="card h-100 border-0 shadow-sm p-4 bg-light text-muted" style="opacity: 0.7;">
            <div class="card-body text-center d-flex flex-column justify-content-center align-items-center">
                <div class="bg-white rounded-circle p-4 mb-3 shadow-sm">
                    <i class="bi bi-stars display-4 text-secondary"></i>
                </div>
                <h3 class="fw-bold">Actividades Sugeridas</h3>
                <p>Tu rutina personalizada de hoy.</p>
                <button class="btn btn-secondary rounded-pill px-4 mt-3" disabled>
                    <i class="bi bi-lock-fill me-2"></i> Próximamente
                </button>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card h-100 border-0 shadow-sm p-4 bg-white border-bottom border-5 border-success cursor-pointer transform-hover" onclick="mostrarCategorias()">
            <div class="card-body text-center d-flex flex-column justify-content-center align-items-center">
                <div class="bg-success-subtle rounded-circle p-4 mb-3">
                    <i class="bi bi-grid-fill display-4 text-success"></i>
                </div>
                <h3 class="fw-bold text-dark">Seleccionar Actividades</h3>
                <p class="text-muted">Explora el catálogo completo de ejercicios.</p>
                <button class="btn btn-success rounded-pill px-4 mt-3">
                    Entrar <i class="bi bi-arrow-right ms-2"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<div id="pantalla-categorias" class="row d-none animate__animated animate__fadeIn">
    
    <div class="col-md-4 mb-4">
        <div class="card border-0 shadow-sm h-100 hover-elevate" onclick="mostrarJuegos('Atención')">
            <div class="card-body p-4 text-center">
                <i class="bi bi-eye-fill display-1 text-primary mb-3"></i>
                <h4 class="fw-bold">Atención</h4>
                <p class="text-muted small">Ejercicios de concentración y enfoque visual.</p>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card border-0 shadow-sm h-100 hover-elevate" onclick="mostrarJuegos('Lenguaje')">
            <div class="card-body p-4 text-center">
                <i class="bi bi-chat-quote-fill display-1 text-warning mb-3"></i>
                <h4 class="fw-bold">Lenguaje</h4>
                <p class="text-muted small">Vocabulario, comprensión y fluidez verbal.</p>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card border-0 shadow-sm h-100 hover-elevate" onclick="mostrarJuegos('Motor')">
            <div class="card-body p-4 text-center">
                <i class="bi bi-hand-index-thumb-fill display-1 text-danger mb-3"></i>
                <h4 class="fw-bold">Motor</h4>
                <p class="text-muted small">Coordinación, precisión y tiempos de reacción.</p>
            </div>
        </div>
    </div>
</div>

<div id="pantalla-lista-juegos" class="d-none animate__animated animate__fadeIn">
    <h4 class="mb-4 text-muted">Ejercicios disponibles de <span id="nombre-categoria" class="fw-bold text-dark">--</span>:</h4>
    
    <div class="row">
        {% for i in "123" %}
        <div class="col-md-4 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-5 text-center bg-light rounded">
                    <i class="bi bi-puzzle display-4 text-secondary opacity-50 mb-3"></i>
                    <h5 class="fw-bold">Juego {{ i }} <span class="nombre-cat-dinamico"></span></h5>
                    <button class="btn btn-sm btn-outline-dark mt-3" disabled>Disponible pronto</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    .cursor-pointer { cursor: pointer; }
    .hover-elevate:hover { transform: translateY(-5px); transition: 0.3s; cursor: pointer; background-color: #f8f9fa; }
</style>

<script>
    // Variables de las pantallas
    const pInicio = document.getElementById('pantalla-inicio');
    const pCategorias = document.getElementById('pantalla-categorias');
    const pJuegos = document.getElementById('pantalla-lista-juegos');
    const btnVolver = document.getElementById('btn-volver');
    const titulo = document.getElementById('titulo-seccion');
    
    // Estado actual (para saber a dónde volver)
    let estado = 'inicio'; // inicio -> categorias -> juegos

    function mostrarCategorias() {
        pInicio.classList.add('d-none');
        pCategorias.classList.remove('d-none');
        pJuegos.classList.add('d-none');
        
        titulo.innerText = "Selecciona un Área";
        btnVolver.classList.remove('d-none');
        estado = 'categorias';
    }

    function mostrarJuegos(categoria) {
        pInicio.classList.add('d-none');
        pCategorias.classList.add('d-none');
        pJuegos.classList.remove('d-none');

        // Actualizamos textos
        titulo.innerText = "Área de " + categoria;
        document.getElementById('nombre-categoria').innerText = categoria;
        
        // Actualizamos los nombres de las tarjetas
        let titulosJuegos = document.querySelectorAll('.nombre-cat-dinamico');
        titulosJuegos.forEach(el => el.innerText = categoria);

        estado = 'juegos';
    }

    function irAtras() {
        if (estado === 'juegos') {
            mostrarCategorias();
        } else if (estado === 'categorias') {
            // Volver al inicio
            pInicio.classList.remove('d-none');
            pCategorias.classList.add('d-none');
            pJuegos.classList.add('d-none');
            titulo.innerText = "Sala de Terapia";
            btnVolver.classList.add('d-none');
            estado = 'inicio';
        }
    }
</script>

{% endblock %}